# 課題 3 レポート

aa83988848 薗田光太郎

## 課題

住んでる A 県で生まれたジモティー 20 代の男性の平均と分散が分かっているので，典型的な A 県生まれの 20 代男性の身長を新たに捏造することが可能である．5 人分捏造してみよ．

`int rand(void)`は`0`〜`RAND_MAX`の疑似乱数（整数）を 1 つ生成する関数である．この関数は整数しか出力されないので，`0`から`1`の間の一様乱数を生成するために，下のような関数 `double r_unif(void)`を作成した．

また，詳細は省くがこの一様乱数生成関数 `r_unif`を用いて，平均 0，分散 1 の標準正規乱数生成関数 `double r_stdnorm(void)`を作成できる(box-muller 法)．
この`r_stdnorm`関数を用いて A 県の男性 5 人の身長を新たに捏造せよ．

```{c}
#include <stdlib.h>
#include <math.h>

double r_unif(void)
{
  return (double)(rand()+1)/(RAND_MAX+2);
}

double r_stdnorm(void)
{
  return sqrt( -2.0*log(r_unif()) ) * sin( 2.0*M_PI*r_unif() );
}
```

### コマンドライン入力

また，今回のプログラムは，実行してから必要な値を入力するのではなく，

```
./k03 170.8 5.43 5
```

などと，実行時に引数でそれらを指定するようにする．そのために，main 関数の引数を void ではなく，

```
int main(int argc, char* argv[])
```

などとする．こうすると，argc に実行時のコマンド行にあるスペースで区切られた文字列の数（今の例だと`4`）が入り，
`argv[0]`には，`"./k03"`，`argv[1]`には，`"170.8"`，...が格納される．`sscanf`でこれらの文字列から数値を読み取ればよい．

### マクロ定義による分岐

コード中のコメントアウトするとき，`/*`と`*/`で囲む，もしくは `//`で行コメントアウトが使えるが，
他の方法も知っておくとよい．

1.`if(0)`で囲んだ分岐ブロックは，コメントアウトと同様に常にスキップされる． 2.`#if 0`~`#endif`で囲んだブロックは，プリプロセスでスキップされる．

違いは，前者の場合にはコード解析されるが，後者はコード解析されない．前者の場合はコメントアウトされていても，ブロックの中の文法が正しいことが要求される．

いずれにせよ，if 分岐がコメントアウトに使えるということだが，逆に上述の 2 のようなマクロは分岐に使うことができるわけで，コンパイル時に"-DTEST"を付けたときだけ printf させたいときは，

```
#ifdef TEST
 printf("%d\n",x);
#endif
```

のような行を加えることができる．

## ソースコードの説明

母平均がμ、母分散がσ^2の正規分布を作りたいから、
(X - μ) / σ = r_stdnorm() より
X = σ * r_stdnorm() + μ

## 入出力結果

以下は例です． コンパイルするときに`-DCONST_SEED`をつけるとこうなります．

```
============================================
template mean: 170.8
template standard deviation: 5.43
Num of dummy data: 5
============================================
162.20
171.29
175.88
168.59
166.74
```

コンパイル時に`-DCONST_SEED`をつけない場合を以下に示す．

## 修正履歴

[comment #20200507]
- 入出力結果をレポート(このファイル)にコピペしてください．
- 元のデータの1つ1つに標準正規乱数N(0,1)を足していますが，確かにそうして偽造した標本から課題1のように母集団平均と分散を推定すれば，課題1の結果と似てくるでしょう．しかし，この課題の狙いは違ってました．
- ソースコードのテンプレートにCSVファイルを読むようなことが書いてありますが，この課題ではCSVファイルは読みません．その代わり，コマンドラインから，母平均と母分散，偽造したいサイズを読み取ります．
- main関数の引数が `int main(void)`ではなく`int main(int argc, char* argv[])`となります．
